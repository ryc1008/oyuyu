import{N as h}from"./prosemirror-state-d26f883c.js";function u(e,n){return n?e.createChecked(null,n):e.createAndFill()}function p(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;const n={};return Object.keys(e.nodes).forEach(t=>{const r=e.nodes[t];r.spec.tableRole&&(n[r.spec.tableRole]=r)}),e.cached.tableNodeTypes=n,n}function S(e,n,t,r,o){const s=p(e),c=[],a=[];for(let i=0;i<t;i+=1){const l=u(s.cell,o);if(l&&a.push(l),r){const f=u(s.header_cell,o);f&&c.push(f)}}const d=[];for(let i=0;i<n;i+=1)d.push(s.row.createChecked(null,r&&i===0?c:a));return s.table.createChecked(null,d)}function k(e,n){return Array.isArray(e)&&e.indexOf(n.type)>-1||n.type===e}function m(e,n){for(let t=e.depth;t>0;t-=1){const r=e.node(t);if(n(r))return{pos:t>0?e.before(t):0,start:e.start(t),depth:t,node:r}}}function y(e){return n=>m(n.$from,e)}function b(e){return e instanceof h}function N(e){return function(n){if(b(n)){const{node:t}=n,{$from:r}=n;if(k(e,t))return{node:t,pos:r.pos,depth:r.depth}}}}function g(e,n){const{from:t,to:r}=e.selection;let o=[];e.doc.nodesBetween(t,r,c=>{o=[...o,...c.marks]});const s=o.find(c=>c.type.name===n.name);return s?s.attrs:{}}function T(e=null,n=null){if(!e||!n)return!1;const t=e.parent.childAfter(e.parentOffset);if(!t.node)return!1;const r=t.node.marks.find(d=>d.type===n);if(!r)return!1;let o=e.index(),s=e.start()+t.offset,c=o+1,a=s+t.node.nodeSize;for(;o>0&&r.isInSet(e.parent.child(o-1).marks);)o-=1,s-=e.parent.child(o).nodeSize;for(;c<e.parent.childCount&&r.isInSet(e.parent.child(c).marks);)a+=e.parent.child(c).nodeSize,c+=1;return{from:s,to:a}}function x(e,n){const{from:t,to:r}=e.selection;let o=[];e.doc.nodesBetween(t,r,c=>{o=[...o,c]});const s=o.reverse().find(c=>c.type.name===n.name);return s?s.attrs:{}}function I(e,n){const{from:t,$from:r,to:o,empty:s}=e.selection;return s?!!n.isInSet(e.storedMarks||r.marks()):!!e.doc.rangeHasMark(t,o,n)}function C({types:e,node:n}){return Array.isArray(e)&&e.includes(n.type)||n.type===e}function M(e,n,t={}){const r=s=>s.type===n,o=N(n)(e.selection)||y(r)(e.selection);return!Object.keys(t).length||!o?!!o:o.node.hasMarkup(n,{...o.node.attrs,...t})}export{x as a,T as b,S as c,C as d,y as f,g,I as m,M as n};
