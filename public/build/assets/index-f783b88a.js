import{m as r}from"./vuex-ab0c87e4.js";import{U as l,r as s,s as n,t as c,u as d,v as m,w as p,n as u}from"./app-f4f25d77.js";import"./axios-4a70c6fc.js";import"./vue-27ef7f4b.js";import"./async-validator-33e353d7.js";import"./babel-runtime-69a8a51d.js";import"./vue-router-b30a8712.js";import"./vue-cookie-6191409e.js";import"./tiny-cookie-20745a96.js";import"./vue-axios-c4ba63d4.js";import"./qs-68262ff1.js";import"./side-channel-4ad99da8.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-2769fc76.js";import"./element-ui-3130f6a7.js";import"./resize-observer-polyfill-abe38d2e.js";import"./throttle-debounce-83204b99.js";import"./babel-helper-vue-jsx-merge-props-f37b6d04.js";import"./normalize-wheel-3e66c890.js";import"./deepmerge-1ee2baff.js";import"./nprogress-d48da9fa.js";import"./moment-fbc5633a.js";/* empty css                     */import"./element-tiptap-376f8dc6.js";import"./tiptap-6f0a2729.js";import"./prosemirror-state-d26f883c.js";import"./prosemirror-model-2d5d1d45.js";import"./orderedmap-1b52af60.js";import"./prosemirror-transform-7d6a52dd.js";import"./prosemirror-view-329e6b0d.js";import"./prosemirror-dropcursor-5184b87b.js";import"./prosemirror-gapcursor-d7df0b38.js";import"./prosemirror-keymap-a3c7cf8f.js";import"./w3c-keyname-a25e4cc1.js";import"./prosemirror-commands-9594733f.js";import"./prosemirror-inputrules-2a9a1b7b.js";import"./tiptap-utils-79441358.js";import"./tiptap-extensions-2e008a14.js";import"./tiptap-commands-9ba0d5a0.js";import"./prosemirror-schema-list-587b3b24.js";import"./highlight.js-9f6fcca9.js";import"./fault-8318a74e.js";import"./format-7101f815.js";import"./prosemirror-tables-c55e9af7.js";import"./prosemirror-history-420343bb.js";import"./rope-sequence-5ceeafee.js";import"./prosemirror-utils-e4018d71.js";import"./mavon-editor-7772d28a.js";const f={computed:{...r({tableHeight:o=>o.tableHeight})},data:function(){return{loading:!1,agents:null,datas:null,torpedos:null,configs:null,detail:null,params:{page:1,kwd:"",aid:0},button:{loading:!1,disable:!1,text:"提 交"},dialog:{title:"",show:!1},dialogTorpedo:{title:"",show:!1},dialogTicket:{title:"",show:!1},formTicket:null,formTorpedo:null,form:null,rules:{item:[{required:!0,message:"请选择鱼雷类型",trigger:"change"}],number:[{required:!0,message:"请填写鱼雷数量",trigger:"blur"}]},rulesTicket:{number:[{required:!0,message:"请填写充值金额",trigger:"blur"}]},ruleTorpedo:{}}},activated(){this.config(),this.list()},methods:{config(){l().then(o=>{o.status?this.$func.error(o.message):this.configs=o.data})},async list(){await this.$func.verify("user.list"),s(this.params).then(o=>{o.status?this.$func.error(o.message):this.datas=o.data,this.loading=!1}).catch(o=>{this.loading=!1})},async torpedo(o){await this.$func.verify("user.torpedo"),this.dialogTorpedo.title="鱼雷管理",this.dialogTorpedo.show=!0,n({id:o.id}).then(e=>{e.status?this.$func.error(e.message):this.torpedos=e.data.items}).catch(e=>{})},async ticket(o){await this.$func.verify("user.ticket"),c({id:o.id}).then(e=>{e.status?this.$func.error(e.message):this.list()}).catch(e=>{})},async recharge(o){await this.$func.verify("user.recharge"),this.formTicket={id:o.id,nickname:o.nickname,player_id:o.player_id,acc:o.acc},this.dialogTicket.title="话费充值",this.dialogTicket.show=!0,this.$nextTick(()=>{this.$refs.formTicket.clearValidate()})},async airdrop(o){await this.$func.verify("user.airdrop"),this.form={id:o.id,item:25,nickname:o.nickname,player_id:o.player_id,acc:o.acc},this.dialog.title="鱼雷充值",this.dialog.show=!0,this.$nextTick(()=>{this.$refs.form.clearValidate()})},async edit(o){await this.$func.verify("user.edit"),this.formTorpedo={id:o.id,nickname:o.nickname,acc:o.acc,player_id:o.player_id,fish_drop:o.fish_drop,buff_num:o.buff_num,buff_end:o.buff_end,win_probability:o.win_probability,lucky_number:o.lucky_number},this.dialogTorpedo.title="用户编辑",this.dialogTorpedo.show=!0,this.$nextTick(()=>{this.$refs.formTorpedo.clearValidate()})},updateAirdrop(){this.$refs.form.validate(o=>{o&&(this.button.disabled=!0,this.button.loading=!0,this.button.text="提交中...",d(this.form).then(e=>{e.status?this.$func.error(e.message):this.$func.success(e.message).then(()=>{this.dialog.show=!1,this.list()}),this.button.disabled=!1,this.button.loading=!1,this.button.text="提 交"}).catch(e=>{this.button.disabled=!1,this.button.loading=!1,this.button.text="提 交"}))})},ticketRecharge(){this.$refs.formTicket.validate(o=>{o&&(this.button.disabled=!0,this.button.loading=!0,this.button.text="提交中...",m(this.formTicket).then(e=>{e.status?this.$func.error(e.message):this.$func.success(e.message).then(()=>{this.dialogTicket.show=!1,this.list()}),this.button.disabled=!1,this.button.loading=!1,this.button.text="提 交"}).catch(e=>{this.button.disabled=!1,this.button.loading=!1,this.button.text="提 交"}))})},update(){this.$refs.formTorpedo.validate(o=>{o&&(this.button.disabled=!0,this.button.loading=!0,this.button.text="提交中...",p(this.formTorpedo).then(e=>{e.status?this.$func.error(e.message):this.$func.success(e.message).then(()=>{this.dialogTorpedo.show=!1,this.list()}),this.button.disabled=!1,this.button.loading=!1,this.button.text="提 交"}).catch(e=>{this.button.disabled=!1,this.button.loading=!1,this.button.text="提 交"}))})},search(){this.params.page=1,this.list()},page(o){this.params.page=o,this.list()}}};var b=function(){var e=this,t=e._self._c;return t("div",{staticClass:"board-content"},[t("div",{staticClass:"board-header"},[t("div",{staticClass:"board-search"},[t("div",{staticClass:"search-item",staticStyle:{width:"250px"}},[t("el-input",{attrs:{placeholder:"请输入ACC / 玩家ID",size:"small",clearable:""},model:{value:e.params.kwd,callback:function(i){e.$set(e.params,"kwd",i)},expression:"params.kwd"}})],1),t("div",{staticClass:"search-item"},[t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:function(i){return e.search()}}},[e._v("搜索")])],1)]),t("div",{staticClass:"board-handle"},[t("el-button",{attrs:{type:"warning",icon:"fa fa-refresh",size:"small"},on:{click:function(i){return e.list()}}},[e._v(" 刷新")])],1)]),t("div",{staticClass:"board-main"},[e.datas?t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleHandle",attrs:{"element-loading-text":"努力加载中...","element-loading-spinner":"el-icon-loading",stripe:"","tooltip-effect":"dark",height:e.tableHeight,data:e.datas.data,border:""}},[t("el-table-column",{attrs:{prop:"id",label:"编号",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",{style:i.row.identity>1?"color:#ff6c60":""},[e._v(e._s(i.row.id))])]}}],null,!1,511795110)}),t("el-table-column",{attrs:{prop:"identity_text",label:"状态",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-tag",{attrs:{type:e.$func.formatTag(i.row.identity)}},[e._v(e._s(i.row.identity_text))])]}}],null,!1,1975566830)}),t("el-table-column",{attrs:{prop:"acc",label:"玩家账户",width:"100",align:"center"}}),t("el-table-column",{attrs:{prop:"player_id",label:"玩家ID",width:"100",align:"center"}}),t("el-table-column",{attrs:{prop:"nickname",label:"昵称",width:"100"}}),t("el-table-column",{attrs:{prop:"torpedo_silver",label:"白银鱼雷",width:"80",align:"center"}}),t("el-table-column",{attrs:{prop:"torpedo_gold",label:"黄金鱼雷",width:"80",align:"center"}}),t("el-table-column",{attrs:{prop:"torpedo_diamond",label:"钻石鱼雷",width:"80",align:"center"}}),t("el-table-column",{attrs:{prop:"silver_number",label:"鱼雷价值",width:"80",align:"center"}}),t("el-table-column",{attrs:{prop:"buff_num",label:"BUFF值",width:"100",align:"center"}}),t("el-table-column",{attrs:{label:"ROI",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[e._v(e._s(i.row.convert_total>0?(i.row.buff_total/i.row.convert_total).toFixed(2):0))]}}],null,!1,1484956818)}),t("el-table-column",{attrs:{prop:"ticket",label:"话费余额",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",{staticClass:"ticket",attrs:{title:"点我刷新",alt:"点我刷新"},on:{click:function(a){return e.ticket(i.row)}}},[e._v(e._s(i.row.ticket))])]}}],null,!1,716110924)}),t("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{attrs:{type:"primary",icon:"fa fa-edit",size:"mini",plain:""},on:{click:function(a){return e.edit(i.row)}}},[e._v(" 编辑 ")]),t("el-button",{attrs:{type:"warning",icon:"fa fa-plus",size:"mini",plain:""},on:{click:function(a){return e.airdrop(i.row)}}},[e._v(" 空投")]),t("el-button",{attrs:{type:"success",icon:"fa fa-yen",size:"mini",plain:""},on:{click:function(a){return e.recharge(i.row)}}},[e._v(" 充值")])]}}],null,!1,2312906946)})],1):e._e()],1),t("pagination",{attrs:{datas:e.datas},on:{page:e.page}}),t("el-dialog",{staticClass:"board-dialog",attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,title:e.dialogTicket.title,visible:e.dialogTicket.show,center:""},on:{"update:visible":function(i){return e.$set(e.dialogTicket,"show",i)}}},[e.formTicket?t("el-form",{ref:"formTicket",staticClass:"board-form",attrs:{model:e.formTicket,rules:e.rulesTicket,"label-width":"120px"}},[t("div",{staticClass:"item-title"},[e._v("基本信息"),t("div",{staticClass:"title-note"},[t("span",[e._v("* ")]),e._v("为必填项")])]),t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{label:"昵 称：",prop:"nickname"}},[t("el-input",{attrs:{placeholder:"玩家昵称",size:"medium",readonly:""},model:{value:e.formTicket.nickname,callback:function(i){e.$set(e.formTicket,"nickname",i)},expression:"formTicket.nickname"}})],1),t("el-form-item",{attrs:{label:"玩 家：",prop:"player_id"}},[t("el-input",{attrs:{placeholder:"玩家ID",size:"medium",readonly:""},model:{value:e.formTicket.player_id,callback:function(i){e.$set(e.formTicket,"player_id",i)},expression:"formTicket.player_id"}})],1),t("el-form-item",{attrs:{label:"账 户：",prop:"acc"}},[t("el-input",{attrs:{placeholder:"玩家账户",size:"medium",readonly:""},model:{value:e.formTicket.acc,callback:function(i){e.$set(e.formTicket,"acc",i)},expression:"formTicket.acc"}})],1),t("el-form-item",{attrs:{label:"金 额：",prop:"number",required:""}},[t("el-input",{attrs:{placeholder:"请填写充值金额",size:"medium",clearable:""},model:{value:e.formTicket.number,callback:function(i){e.$set(e.formTicket,"number",i)},expression:"formTicket.number"}})],1)],1)]):e._e(),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",loading:e.button.loading,disabled:e.button.disable},on:{click:e.ticketRecharge}},[e._v(e._s(e.button.text))]),t("el-button",{on:{click:function(i){e.dialogTicket.show=!1}}},[e._v("关 闭")])],1)],1),t("el-dialog",{staticClass:"board-dialog",attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,title:e.dialog.title,visible:e.dialog.show,center:""},on:{"update:visible":function(i){return e.$set(e.dialog,"show",i)}}},[e.form?t("el-form",{ref:"form",staticClass:"board-form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[t("div",{staticClass:"item-title"},[e._v("基本信息"),t("div",{staticClass:"title-note"},[t("span",[e._v("* ")]),e._v("为必填项")])]),t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{label:"昵 称：",prop:"nickname"}},[t("el-input",{attrs:{placeholder:"玩家昵称",size:"medium",readonly:""},model:{value:e.form.nickname,callback:function(i){e.$set(e.form,"nickname",i)},expression:"form.nickname"}})],1),t("el-form-item",{attrs:{label:"玩 家：",prop:"player_id"}},[t("el-input",{attrs:{placeholder:"玩家ID",size:"medium",readonly:""},model:{value:e.form.player_id,callback:function(i){e.$set(e.form,"player_id",i)},expression:"form.player_id"}})],1),t("el-form-item",{attrs:{label:"账 户：",prop:"acc"}},[t("el-input",{attrs:{placeholder:"玩家账户",size:"medium",readonly:""},model:{value:e.form.acc,callback:function(i){e.$set(e.form,"acc",i)},expression:"form.acc"}})],1),t("el-form-item",{attrs:{label:"鱼 雷：",prop:"item",required:""}},[t("el-radio-group",{attrs:{size:"medium"},model:{value:e.form.item,callback:function(i){e.$set(e.form,"item",i)},expression:"form.item"}},e._l(e.configs.item,function(i,a){return t("el-radio",{key:a,attrs:{label:Number(a),border:""}},[e._v(e._s(i)+" ")])}),1)],1),t("el-form-item",{attrs:{label:"数 量：",prop:"number",required:""}},[t("el-input",{attrs:{placeholder:"请填写鱼雷数量",size:"medium",clearable:""},model:{value:e.form.number,callback:function(i){e.$set(e.form,"number",i)},expression:"form.number"}})],1)],1)]):e._e(),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",loading:e.button.loading,disabled:e.button.disable},on:{click:e.updateAirdrop}},[e._v(e._s(e.button.text))]),t("el-button",{on:{click:function(i){e.dialog.show=!1}}},[e._v("关 闭")])],1)],1),t("el-dialog",{staticClass:"board-dialog",attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,fullscreen:"",title:e.dialogTorpedo.title,visible:e.dialogTorpedo.show,center:""},on:{"update:visible":function(i){return e.$set(e.dialogTorpedo,"show",i)}}},[e.formTorpedo?t("el-form",{ref:"formTorpedo",staticClass:"board-form",attrs:{model:e.formTorpedo,rules:e.ruleTorpedo,"label-width":"120px"}},[t("div",{staticClass:"item-title"},[e._v("基本信息"),t("div",{staticClass:"title-note"},[t("span",[e._v("* ")]),e._v("为必填项")])]),t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{label:"昵 称：",prop:"nickname"}},[t("el-input",{attrs:{placeholder:"玩家昵称",size:"medium",readonly:""},model:{value:e.formTorpedo.nickname,callback:function(i){e.$set(e.formTorpedo,"nickname",i)},expression:"formTorpedo.nickname"}})],1),t("el-form-item",{attrs:{label:"玩 家：",prop:"player_id"}},[t("el-input",{attrs:{placeholder:"玩家ID",size:"medium",readonly:""},model:{value:e.formTorpedo.player_id,callback:function(i){e.$set(e.formTorpedo,"player_id",i)},expression:"formTorpedo.player_id"}})],1),t("el-form-item",{attrs:{label:"账 户：",prop:"acc"}},[t("el-input",{attrs:{placeholder:"玩家账户",size:"medium",readonly:""},model:{value:e.formTorpedo.acc,callback:function(i){e.$set(e.formTorpedo,"acc",i)},expression:"formTorpedo.acc"}})],1),t("el-form-item",{attrs:{label:"中奖概率：",prop:"win_probability"}},[t("el-input",{attrs:{placeholder:"BUFF基础中奖概率，总概率受到其他因素影响",size:"medium",clearable:""},model:{value:e.formTorpedo.win_probability,callback:function(i){e.$set(e.formTorpedo,"win_probability",i)},expression:"formTorpedo.win_probability"}})],1),t("el-form-item",{attrs:{label:"幸运上限：",prop:"lucky_number"}},[t("el-input",{attrs:{placeholder:"幸运上限值，当幸运值达到上限值时掉落剩余所有BUFF值",size:"medium",clearable:""},model:{value:e.formTorpedo.lucky_number,callback:function(i){e.$set(e.formTorpedo,"lucky_number",i)},expression:"formTorpedo.lucky_number"}})],1),t("el-form-item",{attrs:{label:"BUFF值：",prop:"buff_num"}},[t("el-input",{attrs:{placeholder:"BUFF值额度",size:"medium",clearable:""},model:{value:e.formTorpedo.buff_num,callback:function(i){e.$set(e.formTorpedo,"buff_num",i)},expression:"formTorpedo.buff_num"}})],1),t("el-form-item",{attrs:{label:"BUFF保底：",prop:"buff_end"}},[t("el-input",{attrs:{placeholder:"BUFF保底值",size:"medium",clearable:""},model:{value:e.formTorpedo.buff_end,callback:function(i){e.$set(e.formTorpedo,"buff_end",i)},expression:"formTorpedo.buff_end"}},[t("template",{slot:"append"},[e._v("%")])],2)],1),t("el-form-item",{attrs:{label:"鱼类掉率：",prop:"fish_drop"}},[t("el-input",{attrs:{placeholder:"鱼类掉率",size:"medium",clearable:""},model:{value:e.formTorpedo.fish_drop,callback:function(i){e.$set(e.formTorpedo,"fish_drop",i)},expression:"formTorpedo.fish_drop"}},[t("template",{slot:"append"},[e._v("%")])],2)],1)],1)]):e._e(),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",loading:e.button.loading,disabled:e.button.disable},on:{click:e.update}},[e._v(e._s(e.button.text))]),t("el-button",{on:{click:function(i){e.dialogTorpedo.show=!1}}},[e._v("关 闭")])],1)],1)],1)},h=[],_=u(f,b,h,!1,null,"233e29b6",null,null);const _e=_.exports;export{_e as default};
