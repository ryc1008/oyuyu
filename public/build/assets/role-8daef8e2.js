import{m as r}from"./vuex-ab0c87e4.js";import{h as l,i as o,j as n,n as c}from"./app-f4f25d77.js";import"./axios-4a70c6fc.js";import"./vue-27ef7f4b.js";import"./async-validator-33e353d7.js";import"./babel-runtime-69a8a51d.js";import"./vue-router-b30a8712.js";import"./vue-cookie-6191409e.js";import"./tiny-cookie-20745a96.js";import"./vue-axios-c4ba63d4.js";import"./qs-68262ff1.js";import"./side-channel-4ad99da8.js";import"./get-intrinsic-bd2830fd.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-e5c1c8b0.js";import"./object-inspect-2769fc76.js";import"./element-ui-3130f6a7.js";import"./resize-observer-polyfill-abe38d2e.js";import"./throttle-debounce-83204b99.js";import"./babel-helper-vue-jsx-merge-props-f37b6d04.js";import"./normalize-wheel-3e66c890.js";import"./deepmerge-1ee2baff.js";import"./nprogress-d48da9fa.js";import"./moment-fbc5633a.js";/* empty css                     */import"./element-tiptap-376f8dc6.js";import"./tiptap-6f0a2729.js";import"./prosemirror-state-d26f883c.js";import"./prosemirror-model-2d5d1d45.js";import"./orderedmap-1b52af60.js";import"./prosemirror-transform-7d6a52dd.js";import"./prosemirror-view-329e6b0d.js";import"./prosemirror-dropcursor-5184b87b.js";import"./prosemirror-gapcursor-d7df0b38.js";import"./prosemirror-keymap-a3c7cf8f.js";import"./w3c-keyname-a25e4cc1.js";import"./prosemirror-commands-9594733f.js";import"./prosemirror-inputrules-2a9a1b7b.js";import"./tiptap-utils-79441358.js";import"./tiptap-extensions-2e008a14.js";import"./tiptap-commands-9ba0d5a0.js";import"./prosemirror-schema-list-587b3b24.js";import"./highlight.js-9f6fcca9.js";import"./fault-8318a74e.js";import"./format-7101f815.js";import"./prosemirror-tables-c55e9af7.js";import"./prosemirror-history-420343bb.js";import"./rope-sequence-5ceeafee.js";import"./prosemirror-utils-e4018d71.js";import"./mavon-editor-7772d28a.js";const m={computed:{...r({tableHeight:i=>i.tableHeight})},data:function(){return{loading:!1,datas:null,params:{page:1,kwd:""},button:{loading:!1,disable:!1,text:"提 交"},dialog:{title:"",show:!1},form:null,slection:[],rules:{title:[{required:!0,message:"请填写角色名称",trigger:"blur"}],brief:[{required:!0,message:"请填写角色描述",trigger:"blur"}]}}},activated(){this.list()},methods:{async list(){await this.$func.verify("role.list"),this.loading=!0,l(this.params).then(i=>{i.status?this.$func.error(i.message):this.datas=i.data,this.loading=!1}).catch(i=>{this.loading=!1})},async create(){await this.$func.verify("role.create"),this.form={title:"",brief:""},this.dialog.title="新增角色",this.dialog.show=!0,this.$nextTick(()=>{this.$refs.form.clearValidate()})},async edit(i){await this.$func.verify("role.edit"),this.form={id:i.id,title:i.title,brief:i.brief},this.dialog.title="编辑角色",this.dialog.show=!0,this.$nextTick(()=>{this.$refs.form.clearValidate()})},update(){this.$refs.form.validate(i=>{i&&(this.button.disabled=!0,this.button.loading=!0,this.button.text="提交中...",o(this.form).then(t=>{t.status?this.$func.error(t.message):this.$func.success(t.message).then(()=>{this.dialog.show=!1,this.list()}),this.button.disabled=!1,this.button.loading=!1,this.button.text="提 交"}).catch(t=>{this.button.disabled=!1,this.button.loading=!1,this.button.text="提 交"}))})},multiple(i){this.slection=[],i.length&&i.forEach(t=>{this.slection.push(t.id)})},del(){if(!this.slection.length)return this.$func.error("请选择你要操作的数据"),!1;this.destroy(this.slection)},async destroy(i){await this.$func.verify("role.destroy"),this.$confirm("您确定要删除选中的该条信息吗？","提示",{type:"warning",confirmButtonText:"确 定",cancelButtonText:"取 消"}).then(()=>{n({id:i}).then(t=>{t.status?this.$func.error(t.message):this.list()})}).catch(()=>{})},async access(i){await this.$func.verify("role.access"),this.$router.push({name:"access",query:{id:i}})},search(){this.params.page=1,this.list()},page(i){this.params.page=i,this.list()}}};var d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"board-content"},[e("div",{staticClass:"board-header"},[e("div",{staticClass:"board-search"},[e("div",{staticClass:"search-item"},[e("el-input",{attrs:{placeholder:"请输入名称",size:"small",clearable:""},model:{value:t.params.kwd,callback:function(a){t.$set(t.params,"kwd",a)},expression:"params.kwd"}})],1),e("div",{staticClass:"search-item"},[e("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:function(a){return t.search()}}},[t._v("搜索")])],1)]),e("div",{staticClass:"board-handle"},[e("el-button",{attrs:{type:"warning",icon:"fa fa-refresh",size:"small"},on:{click:function(a){return t.list()}}},[t._v(" 刷新")]),e("el-button",{attrs:{type:"primary",icon:"fa fa-plus",size:"small"},on:{click:function(a){return t.create()}}},[t._v(" 新增")]),e("el-button",{attrs:{type:"info",icon:"fa fa-trash",size:"small"},on:{click:function(a){return t.del()}}},[t._v(" 删除")])],1)]),e("div",{staticClass:"board-main"},[t.datas?e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleHandle",attrs:{"element-loading-text":"努力加载中...","element-loading-spinner":"el-icon-loading",stripe:"","tooltip-effect":"dark",height:t.tableHeight,data:t.datas.data,border:""},on:{"selection-change":t.multiple}},[e("el-table-column",{attrs:{type:"selection",width:"45",align:"center"}}),e("el-table-column",{attrs:{prop:"id",label:"编号",width:"65",align:"center"}}),e("el-table-column",{attrs:{prop:"title",label:"名称",width:"140"}}),e("el-table-column",{attrs:{prop:"brief",label:"描述",width:"250"}}),e("el-table-column",{attrs:{prop:"created_at",label:"创建时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(t.$moment(a.row.created_at).format("YYYY-MM-DD HH:mm:ss"))+" ")]}}],null,!1,1705350222)}),e("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"270"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",icon:"fa fa-edit",size:"mini",plain:""},on:{click:function(s){return t.edit(a.row)}}},[t._v(" 编辑 ")]),a.row.id>1?e("el-button",{attrs:{type:"warning",icon:"fa fa-gavel",size:"mini",plain:""},on:{click:function(s){return t.access(a.row.id)}}},[t._v(" 授权 ")]):t._e(),a.row.id>1?e("el-button",{attrs:{type:"info",icon:"fa fa-trash",size:"mini",plain:""},on:{click:function(s){return t.destroy(a.row.id)}}},[t._v(" 删除 ")]):t._e()]}}],null,!1,3180902563)})],1):t._e()],1),e("pagination",{attrs:{datas:t.datas},on:{page:t.page}}),e("el-dialog",{staticClass:"board-dialog",attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,title:t.dialog.title,visible:t.dialog.show,center:""},on:{"update:visible":function(a){return t.$set(t.dialog,"show",a)}}},[t.form?e("el-form",{ref:"form",staticClass:"board-form",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[e("div",{staticClass:"item-title"},[t._v("基本信息"),e("div",{staticClass:"title-note"},[e("span",[t._v("* ")]),t._v("为必填项")])]),e("div",{staticClass:"form-item"},[e("el-form-item",{attrs:{label:"名 称：",prop:"title"}},[e("el-input",{attrs:{placeholder:"请填写角色名称",size:"medium",clearable:""},model:{value:t.form.title,callback:function(a){t.$set(t.form,"title",a)},expression:"form.title"}})],1),e("el-form-item",{attrs:{label:"描 述：",prop:"brief"}},[e("el-input",{attrs:{placeholder:"请填写角色描述",size:"medium",clearable:""},model:{value:t.form.brief,callback:function(a){t.$set(t.form,"brief",a)},expression:"form.brief"}})],1)],1)]):t._e(),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary",loading:t.button.loading,disabled:t.button.disable},on:{click:t.update}},[t._v(t._s(t.button.text))]),e("el-button",{staticClass:"close-btn",on:{click:function(a){t.dialog.show=!1}}},[t._v("关 闭")])],1)],1)],1)},p=[],f=c(m,d,p,!1,null,null,null,null);const ft=f.exports;export{ft as default};
